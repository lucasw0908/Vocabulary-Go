{% extends "base.html" %}

{% block main %}
<link href="{{ url_for('static', filename='assets/css/library.css') }}" rel="stylesheet">

<section class="section container" style="margin-top: 2rem;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="m-0">選擇要編輯的題庫</h3>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="/library">
        返回
      </a>
      <a class="btn btn-primary" href="/library/create">
        <i class="bi bi-plus-lg"></i> 新建題庫
      </a>
    </div>
  </div>

  {% if libraries|length == 0 %}
  <div class="alert alert-info">你還沒有建立任何題庫，請先建立一個。</div>
  {% else %}
  <div class="list-group">
    {% for lib in libraries %}
    <div class="list-group-item d-flex justify-content-between align-items-center dark-card"
      style="border-radius: .5rem; margin-bottom: .75rem;">
      <div class="flex-grow-1">
        <div class="d-flex align-items-center" style="gap: .75rem;">
          <strong>{{ lib.name }}</strong>
          <span class="badge bg-secondary">{{ lib.count }} 詞彙</span>
          {% if not lib.public %}
          <span class="privacy-badge private">(非公開)</span>
          {% endif %}
        </div>
        <div class="text-muted small mt-1">{{ lib.description or "無描述" }}</div>
      </div>
      <div class="d-flex align-items-center" style="gap: .5rem;">
        <a class="btn btn-outline-primary btn-sm" href="/library/edit/{{ lib.name }}">
          <i class="bi bi-pencil-square"></i> 編輯
        </a>
        <button class="btn btn-outline-danger btn-sm" data-name="{{ lib.name }}" id="deleteLibraryBtn">
          <i class="bi bi-trash"></i> 刪除
        </button>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}
</section>

<script src="{{ url_for('static', filename='assets/js/dist/library_edit_select.bundle.js') }}"></script>
{% endblock main %}